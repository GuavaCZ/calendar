// resources/js/calendar.js
function calendar({
  view = "dayGridMonth",
  locale = "en",
  firstDay = 1,
  dayMaxEvents = false,
  eventContent = null,
  eventClickEnabled = false,
  eventDragEnabled = false,
  eventResizeEnabled = false,
  noEventsClickEnabled = false,
  dateClickEnabled = false,
  dateSelectEnabled = false,
  datesSetEnabled = false,
  viewDidMountEnabled = false,
  eventAllUpdatedEnabled = false,
  hasDateClickContextMenu = null,
  hasDateSelectContextMenu = null,
  hasEventClickContextMenu = null,
  hasNoEventsClickContextMenu = null,
  resources = null,
  resourceLabelContent = null,
  theme = null,
  options = {},
  eventAssetUrl
}) {
  return {
    init: function() {
      const ec = this.mountCalendar();
      window.addEventListener("calendar--refresh", () => {
        ec.refetchEvents();
      });
      this.$wire.on("calendar--set", (data) => {
        ec.setOption(data.key, data.value);
      });
    },
    mountCalendar: function() {
      return EventCalendar.create(
        this.$el.querySelector("[data-calendar]"),
        this.getSettings()
      );
    },
    getSettings: function() {
      let settings = {
        view,
        locale,
        firstDay,
        dayMaxEvents,
        eventSources: [
          {
            events: (fetchInfo) => this.$wire.getEventsJs({
              ...fetchInfo,
              tzOffset: -(/* @__PURE__ */ new Date()).getTimezoneOffset()
            })
          }
        ],
        resources,
        selectable: dateSelectEnabled,
        eventStartEditable: eventDragEnabled,
        eventDurationEditable: eventResizeEnabled
      };
      if (eventContent !== null) {
        settings.eventContent = (info) => {
          const model = info.event.extendedProps.model;
          const content = eventContent[model] ?? eventContent["_default"];
          if (content === void 0) {
            return void 0;
          }
          return {
            html: content
          };
        };
      }
      if (resourceLabelContent !== null) {
        settings.resourceLabelContent = (info) => {
          const model = info.resource.extendedProps.model;
          const content = resourceLabelContent[model] ?? resourceLabelContent["_default"];
          if (content === void 0) {
            return void 0;
          }
          return {
            html: this.wrapContent(content, info)
          };
        };
      }
      if (dateClickEnabled) {
        settings.dateClick = (info) => {
          const data = {
            date: info.date,
            dateStr: info.dateStr,
            allDay: info.allDay,
            view: info.view,
            resource: info.resource,
            tzOffset: -(/* @__PURE__ */ new Date()).getTimezoneOffset()
          };
          if (hasDateClickContextMenu) {
            this.openContextMenu(info.jsEvent, data, "dateClick");
          } else {
            this.$wire.onDateClickJs(data);
          }
        };
      }
      if (dateSelectEnabled) {
        settings.select = (info) => {
          const data = {
            start: info.start,
            startStr: info.startStr,
            end: info.end,
            endStr: info.endStr,
            allDay: info.allDay,
            view: info.view,
            resource: info.resource,
            tzOffset: -(/* @__PURE__ */ new Date()).getTimezoneOffset()
          };
          if (hasDateSelectContextMenu) {
            this.openContextMenu(info.jsEvent, data, "dateSelect");
          } else {
            this.$wire.onDateSelectJs(data);
          }
        };
      }
      if (datesSetEnabled) {
        settings.datesSet = (info) => {
          this.$wire.onDatesSetJs({
            start: info.start,
            startStr: info.startStr,
            end: info.end,
            endStr: info.endStr,
            view: info.view,
            tzOffset: -(/* @__PURE__ */ new Date()).getTimezoneOffset()
          });
        };
      }
      if (eventClickEnabled) {
        settings.eventClick = (info) => {
          const component = Alpine.$data(info.el);
          component.onClick(info);
        };
      }
      settings.eventResize = async (info) => {
        const durationEditable = info.event.durationEditable;
        let enabled = eventResizeEnabled;
        if (durationEditable !== void 0) {
          enabled = durationEditable;
        }
        if (enabled) {
          await this.$wire.onEventResizeJs({
            event: info.event,
            oldEvent: info.oldEvent,
            endDelta: info.endDelta,
            view: info.view,
            tzOffset: -(/* @__PURE__ */ new Date()).getTimezoneOffset()
          }).then((result) => {
            if (result === false) {
              info.revert();
            }
          });
        }
      };
      settings.eventDrop = async (info) => {
        const startEditable = info.event.startEditable;
        let enabled = eventDragEnabled;
        if (startEditable !== void 0) {
          enabled = startEditable;
        }
        if (enabled) {
          await this.$wire.onEventDropJs({
            event: info.event,
            oldEvent: info.oldEvent,
            oldResource: info.oldResource,
            newResource: info.newResource,
            delta: info.delta,
            view: info.view,
            tzOffset: -(/* @__PURE__ */ new Date()).getTimezoneOffset()
          }).then((result) => {
            if (result === false) {
              info.revert();
            }
          });
        }
      };
      settings.eventDidMount = (info) => {
        info.el.setAttribute("x-load");
        info.el.setAttribute("x-load-src", eventAssetUrl);
        info.el.setAttribute("x-data", `calendarEvent({
                    event: ${JSON.stringify(info.event)},
                    timeText: "${info.timeText}",
                    view: ${JSON.stringify(info.view)},
                    hasContextMenu: ${hasEventClickContextMenu},
                })`);
      };
      if (noEventsClickEnabled) {
        settings.noEventsClick = (info) => {
          const data = {
            view: info.view,
            tzOffset: -(/* @__PURE__ */ new Date()).getTimezoneOffset()
          };
          if (hasNoEventsClickContextMenu) {
            this.openContextMenu(info.jsEvent, data, "noEventsClick");
          } else {
            this.$wire.onNoEventsClickJs(data);
          }
        };
      }
      if (viewDidMountEnabled) {
        settings.viewDidMount = (info) => {
          this.$wire.onViewDidMountJs({
            view: info.view,
            tzOffset: -(/* @__PURE__ */ new Date()).getTimezoneOffset()
          });
        };
      }
      if (eventAllUpdatedEnabled) {
        settings.eventAllUpdated = (info) => {
          this.$wire.onEventAllUpdatedJs({
            view: info.view,
            tzOffset: -(/* @__PURE__ */ new Date()).getTimezoneOffset()
          });
        };
      }
      if (theme) {
        settings.theme = function(defaultTheme) {
          return {
            ...defaultTheme,
            ...theme
          };
        };
      }
      return {
        ...settings,
        ...options
      };
    },
    wrapContent: function(content, info) {
      let container = document.createElement("div");
      container.innerHTML = content;
      container.setAttribute("x-data", JSON.stringify(info));
      container.classList.add("w-full");
      return container.outerHTML;
    },
    openContextMenu: function(jsEvent, data, context) {
      const element = document.querySelector("[calendar-context-menu]");
      const contextMenu = Alpine.$data(element);
      contextMenu.loadActions(context, data);
      contextMenu.openMenu(jsEvent);
    }
  };
}
export {
  calendar as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vcmVzb3VyY2VzL2pzL2NhbGVuZGFyLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjYWxlbmRhcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldyA9ICdkYXlHcmlkTW9udGgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZSA9ICdlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3REYXkgPSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheU1heEV2ZW50cyA9IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50Q29udGVudCA9IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRDbGlja0VuYWJsZWQgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudERyYWdFbmFibGVkID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRSZXNpemVFbmFibGVkID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9FdmVudHNDbGlja0VuYWJsZWQgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlQ2xpY2tFbmFibGVkID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVNlbGVjdEVuYWJsZWQgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlc1NldEVuYWJsZWQgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3RGlkTW91bnRFbmFibGVkID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRBbGxVcGRhdGVkRW5hYmxlZCA9IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0RhdGVDbGlja0NvbnRleHRNZW51ID0gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNEYXRlU2VsZWN0Q29udGV4dE1lbnUgPSBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0V2ZW50Q2xpY2tDb250ZXh0TWVudSA9IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzTm9FdmVudHNDbGlja0NvbnRleHRNZW51ID0gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMgPSBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlTGFiZWxDb250ZW50ID0gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVtZSA9IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QXNzZXRVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4pIHtcbiAgICByZXR1cm4ge1xuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGVjID0gdGhpcy5tb3VudENhbGVuZGFyKClcblxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NhbGVuZGFyLS1yZWZyZXNoJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGVjLnJlZmV0Y2hFdmVudHMoKVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgdGhpcy4kd2lyZS5vbignY2FsZW5kYXItLXNldCcsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgZWMuc2V0T3B0aW9uKGRhdGEua2V5LCBkYXRhLnZhbHVlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcblxuICAgICAgICBtb3VudENhbGVuZGFyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gRXZlbnRDYWxlbmRhci5jcmVhdGUoXG4gICAgICAgICAgICAgICAgdGhpcy4kZWwucXVlcnlTZWxlY3RvcignW2RhdGEtY2FsZW5kYXJdJyksXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTZXR0aW5ncygpLFxuICAgICAgICAgICAgKVxuICAgICAgICB9LFxuXG4gICAgICAgIGdldFNldHRpbmdzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgc2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAgICAgdmlldzogdmlldyxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICAgICAgICAgICAgICBmaXJzdERheTogZmlyc3REYXksXG4gICAgICAgICAgICAgICAgZGF5TWF4RXZlbnRzOiBkYXlNYXhFdmVudHMsXG4gICAgICAgICAgICAgICAgZXZlbnRTb3VyY2VzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50czogKGZldGNoSW5mbykgPT4gdGhpcy4kd2lyZS5nZXRFdmVudHNKcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZmV0Y2hJbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR6T2Zmc2V0OiAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzOiByZXNvdXJjZXMsXG4gICAgICAgICAgICAgICAgc2VsZWN0YWJsZTogZGF0ZVNlbGVjdEVuYWJsZWQsXG4gICAgICAgICAgICAgICAgZXZlbnRTdGFydEVkaXRhYmxlOiBldmVudERyYWdFbmFibGVkLFxuICAgICAgICAgICAgICAgIGV2ZW50RHVyYXRpb25FZGl0YWJsZTogZXZlbnRSZXNpemVFbmFibGVkLFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZXZlbnRDb250ZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuZXZlbnRDb250ZW50ID0gKGluZm8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWwgPSBpbmZvLmV2ZW50LmV4dGVuZGVkUHJvcHMubW9kZWxcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGV2ZW50Q29udGVudFttb2RlbF0gPz8gZXZlbnRDb250ZW50WydfZGVmYXVsdCddXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZXNvdXJjZUxhYmVsQ29udGVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLnJlc291cmNlTGFiZWxDb250ZW50ID0gKGluZm8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWwgPSBpbmZvLnJlc291cmNlLmV4dGVuZGVkUHJvcHMubW9kZWxcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHJlc291cmNlTGFiZWxDb250ZW50W21vZGVsXSA/PyByZXNvdXJjZUxhYmVsQ29udGVudFsnX2RlZmF1bHQnXVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sOiB0aGlzLndyYXBDb250ZW50KGNvbnRlbnQsIGluZm8pLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRhdGVDbGlja0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5kYXRlQ2xpY2sgPSAoaW5mbykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogaW5mby5kYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVN0cjogaW5mby5kYXRlU3RyLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsRGF5OiBpbmZvLmFsbERheSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXc6IGluZm8udmlldyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlOiBpbmZvLnJlc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHpPZmZzZXQ6IC1uZXcgRGF0ZSgpLmdldFRpbWV6b25lT2Zmc2V0KClcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNEYXRlQ2xpY2tDb250ZXh0TWVudSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuQ29udGV4dE1lbnUoaW5mby5qc0V2ZW50LCBkYXRhLCAnZGF0ZUNsaWNrJylcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHdpcmUub25EYXRlQ2xpY2tKcyhkYXRhKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0ZVNlbGVjdEVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5zZWxlY3QgPSAoaW5mbykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGluZm8uc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFN0cjogaW5mby5zdGFydFN0cixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogaW5mby5lbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRTdHI6IGluZm8uZW5kU3RyLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsRGF5OiBpbmZvLmFsbERheSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXc6IGluZm8udmlldyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlOiBpbmZvLnJlc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHpPZmZzZXQ6IC1uZXcgRGF0ZSgpLmdldFRpbWV6b25lT2Zmc2V0KClcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNEYXRlU2VsZWN0Q29udGV4dE1lbnUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkNvbnRleHRNZW51KGluZm8uanNFdmVudCwgZGF0YSwgJ2RhdGVTZWxlY3QnKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kd2lyZS5vbkRhdGVTZWxlY3RKcyhkYXRhKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0ZXNTZXRFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuZGF0ZXNTZXQgPSAoaW5mbykgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiR3aXJlLm9uRGF0ZXNTZXRKcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogaW5mby5zdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0U3RyOiBpbmZvLnN0YXJ0U3RyLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBpbmZvLmVuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFN0cjogaW5mby5lbmRTdHIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3OiBpbmZvLnZpZXcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ek9mZnNldDogLW5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGV2ZW50Q2xpY2tFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuZXZlbnRDbGljayA9IChpbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IEFscGluZS4kZGF0YShpbmZvLmVsKVxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQub25DbGljayhpbmZvKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0dGluZ3MuZXZlbnRSZXNpemUgPSBhc3luYyAoaW5mbykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uRWRpdGFibGUgPSBpbmZvLmV2ZW50LmR1cmF0aW9uRWRpdGFibGVcbiAgICAgICAgICAgICAgICBsZXQgZW5hYmxlZCA9IGV2ZW50UmVzaXplRW5hYmxlZFxuXG4gICAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uRWRpdGFibGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkID0gZHVyYXRpb25FZGl0YWJsZVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChlbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuJHdpcmUub25FdmVudFJlc2l6ZUpzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiBpbmZvLmV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkRXZlbnQ6IGluZm8ub2xkRXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmREZWx0YTogaW5mby5lbmREZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXc6IGluZm8udmlldyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR6T2Zmc2V0OiAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpXG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLnJldmVydCgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgc2V0dGluZ3MuZXZlbnREcm9wID0gYXN5bmMgKGluZm8pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydEVkaXRhYmxlID0gaW5mby5ldmVudC5zdGFydEVkaXRhYmxlXG4gICAgICAgICAgICAgICAgbGV0IGVuYWJsZWQgPSBldmVudERyYWdFbmFibGVkXG5cbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRFZGl0YWJsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQgPSBzdGFydEVkaXRhYmxlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4kd2lyZS5vbkV2ZW50RHJvcEpzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiBpbmZvLmV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkRXZlbnQ6IGluZm8ub2xkRXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRSZXNvdXJjZTogaW5mby5vbGRSZXNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Jlc291cmNlOiBpbmZvLm5ld1Jlc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGE6IGluZm8uZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3OiBpbmZvLnZpZXcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ek9mZnNldDogLW5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKVxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5yZXZlcnQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0dGluZ3MuZXZlbnREaWRNb3VudCA9IChpbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgaW5mby5lbC5zZXRBdHRyaWJ1dGUoJ3gtbG9hZCcpXG4gICAgICAgICAgICAgICAgaW5mby5lbC5zZXRBdHRyaWJ1dGUoJ3gtbG9hZC1zcmMnLCBldmVudEFzc2V0VXJsKVxuICAgICAgICAgICAgICAgIGluZm8uZWwuc2V0QXR0cmlidXRlKCd4LWRhdGEnLCBgY2FsZW5kYXJFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAke0pTT04uc3RyaW5naWZ5KGluZm8uZXZlbnQpfSxcbiAgICAgICAgICAgICAgICAgICAgdGltZVRleHQ6IFwiJHtpbmZvLnRpbWVUZXh0fVwiLFxuICAgICAgICAgICAgICAgICAgICB2aWV3OiAke0pTT04uc3RyaW5naWZ5KGluZm8udmlldyl9LFxuICAgICAgICAgICAgICAgICAgICBoYXNDb250ZXh0TWVudTogJHtoYXNFdmVudENsaWNrQ29udGV4dE1lbnV9LFxuICAgICAgICAgICAgICAgIH0pYClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5vRXZlbnRzQ2xpY2tFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mubm9FdmVudHNDbGljayA9IChpbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3OiBpbmZvLnZpZXcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ek9mZnNldDogLW5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc05vRXZlbnRzQ2xpY2tDb250ZXh0TWVudSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuQ29udGV4dE1lbnUoaW5mby5qc0V2ZW50LCBkYXRhLCAnbm9FdmVudHNDbGljaycpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR3aXJlLm9uTm9FdmVudHNDbGlja0pzKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2aWV3RGlkTW91bnRFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mudmlld0RpZE1vdW50ID0gKGluZm8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kd2lyZS5vblZpZXdEaWRNb3VudEpzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXc6IGluZm8udmlldyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR6T2Zmc2V0OiAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZXZlbnRBbGxVcGRhdGVkRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLmV2ZW50QWxsVXBkYXRlZCA9IChpbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHdpcmUub25FdmVudEFsbFVwZGF0ZWRKcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3OiBpbmZvLnZpZXcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ek9mZnNldDogLW5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoZW1lKSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MudGhlbWUgPSBmdW5jdGlvbiAoZGVmYXVsdFRoZW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5kZWZhdWx0VGhlbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGVtZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLnNldHRpbmdzLFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgd3JhcENvbnRlbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBpbmZvKSB7XG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBjb250ZW50XG5cbiAgICAgICAgICAgIC8vIEFkZCBhbHBpbmUgZGF0YSBhbmQgY2xhc3Nlc1xuICAgICAgICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgneC1kYXRhJywgSlNPTi5zdHJpbmdpZnkoaW5mbykpXG4gICAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgndy1mdWxsJylcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBtb2RpZmllZCBIVE1MXG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyLm91dGVySFRNTFxuICAgICAgICB9LFxuXG4gICAgICAgIG9wZW5Db250ZXh0TWVudTogZnVuY3Rpb24gKGpzRXZlbnQsIGRhdGEsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbY2FsZW5kYXItY29udGV4dC1tZW51XScpXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0TWVudSA9IEFscGluZS4kZGF0YShlbGVtZW50KVxuICAgICAgICAgICAgY29udGV4dE1lbnUubG9hZEFjdGlvbnMoY29udGV4dCwgZGF0YSlcbiAgICAgICAgICAgIGNvbnRleHRNZW51Lm9wZW5NZW51KGpzRXZlbnQpXG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwKICAibWFwcGluZ3Mi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
